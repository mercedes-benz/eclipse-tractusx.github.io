"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[11202],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),h=o,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return a?n.createElement(m,s(s({ref:t},p),{},{components:a})):n.createElement(m,s({ref:t},p))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},19227:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=a(87462),o=(a(67294),a(3905));const r={title:"Consume data",sidebar_position:3},s=void 0,i={unversionedId:"tutorials/e2e/boost/consumeData",id:"tutorials/e2e/boost/consumeData",title:"Consume data",description:"This step continues the journey of our data consumer Alice. After the data provider Bob has successfully provided his data as a contract definition in his catalog. Alice will now consume the data.",source:"@site/docs/tutorials/e2e/boost/consumeData.md",sourceDirName:"tutorials/e2e/boost",slug:"/tutorials/e2e/boost/consumeData",permalink:"/docs/tutorials/e2e/boost/consumeData",draft:!1,editUrl:"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/tutorials/e2e/boost/consumeData.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Consume data",sidebar_position:3},sidebar:"tutorials",previous:{title:"Provide data",permalink:"/docs/tutorials/e2e/boost/provideData"},next:{title:"Restricting users from accessing an asset",permalink:"/docs/tutorials/e2e/boost/restrictData"}},l={},c=[{value:"Request the catalog",id:"request-the-catalog",level:2},{value:"Negotiate a contract",id:"negotiate-a-contract",level:2},{value:"Transfer the data",id:"transfer-the-data",level:2},{value:"Notice",id:"notice",level:2}],p={toc:c};function u(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This step continues the journey of our data consumer Alice. After the data provider Bob has successfully provided his data as a contract definition in his catalog. Alice will now consume the data."),(0,o.kt)("p",null,"We will use plain CLI tools (",(0,o.kt)("inlineCode",{parentName:"p"},"curl"),") for this, but feel free to use graphical tools such as Postman or Insomnia."),(0,o.kt)("h2",{id:"request-the-catalog"},"Request the catalog"),(0,o.kt)("p",null,"To see Bob's data offerings, Alice must request access to his catalog. The catalog shows all the assets that Alice can consume from Bob."),(0,o.kt)("p",null,"So Alice requests Bob's catalog using the following ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location \'http://localhost/alice/management/v2/catalog/request\' \\\n--header \'Content-Type: application/json\' \\\n--header \'X-Api-Key: password\' \\\n--data-raw \'{\n    "@context": {},\n    "protocol": "dataspace-protocol-http",\n    "counterPartyAddress": "http://bob-controlplane:8084/api/v1/dsp",\n    "querySpec": {\n        "offset": 0,\n        "limit": 100\n    }\n}\'\n')),(0,o.kt)("p",null,"The response shows all available data offerings in Bob's catalog. Bob has already told Alice that he gave the Asset the ID 3, and added a simple description to make it easier for Alice to identify."),(0,o.kt)("p",null,'Alice finds the Asset with the ID 3 and the description "Product EDC Demo Asset 3" in the catalog. Now that she is sure which Asset she wants to consume, she wants to start the data transfer.'),(0,o.kt)("h2",{id:"negotiate-a-contract"},"Negotiate a contract"),(0,o.kt)("p",null,"But before she can transfer the data, she must negotiate the contract with Bob. To do this, she uses the following ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location \'http://localhost/alice/management/v2/contractnegotiations\' \\\n--header \'Content-Type: application/json\' \\\n--header \'X-Api-Key: password\' \\\n--data-raw \'{\n "@context": {\n  "odrl": "http://www.w3.org/ns/odrl/2/"\n },\n "@type": "NegotiationInitiateRequestDto",\n "connectorAddress": "http://alice-controlplane:8084/api/v1/dsp",\n "protocol": "dataspace-protocol-http",\n "connectorId": "BPNL000000000001",\n "providerId": "BPNL000000000001",\n "offer": {\n  "offerId": "MQ==:MQ==:ZDM4Nzk3NmUtZjA0Ny00ZmNjLWFhNWItYjQwYmVkMDBhZGYy",\n  "assetId": "3",\n  "policy": {\n   "@type": "odrl:Set",\n   "odrl:permission": {\n    "odrl:target": "3",\n    "odrl:action": {\n     "odrl:type": "USE"\n    },\n    "odrl:constraint": {\n     "odrl:or": {\n      "odrl:leftOperand": "BusinessPartnerNumber",\n      "odrl:operator": {\n                            "@id": "odrl:eq"\n                        },\n      "odrl:rightOperand": "BPNL000000000002"\n     }\n    }\n   },\n   "odrl:prohibition": [],\n   "odrl:obligation": [],\n   "odrl:target": "3"\n  }\n }\n}\'\n')),(0,o.kt)("p",null,"Alice now has a contract with Bob and can begin transferring the asset's data."),(0,o.kt)("h2",{id:"transfer-the-data"},"Transfer the data"),(0,o.kt)("p",null,'Alice wants to send the data to her backend application ("',(0,o.kt)("a",{parentName:"p",href:"http://backend:8080"},"http://backend:8080"),'"). So she uses the following command to direct the data from Asset 3 to her desired data sink.'),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For testing purposes, you can replace ",(0,o.kt)("inlineCode",{parentName:"p"},"backend:8080")," with your own test API or use ",(0,o.kt)("a",{parentName:"p",href:"https://webhook.site/"},"webhook. site"),' as your backend system. If you are using webhook.site, please make sure that you use "Your unique URL" and that you do not transfer any sensitive information to webhook.')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location \'http://localhost/alice/management/v2/transferprocesses\' \\\n--header \'Content-Type: application/json\' \\\n--header \'X-Api-Key: password\' \\\n--data-raw \'{\n    "@context": {\n        "odrl": "http://www.w3.org/ns/odrl/2/"\n    },\n    "assetId": "3",\n    "connectorAddress": "http://alice-controlplane:8084/api/v1/dsp",\n    "connectorId": "BPNL000000000001",\n    "contractId": "3",\n    "dataDestination": {\n        "type": "HttpProxy"\n    },\n    "privateProperties": {\n        "receiverHttpEndpoint": "http://backend:8080"\n    },\n    "protocol": "dataspace-protocol-http",\n    "transferType": {\n        "contentType": "application/octet-stream",\n        "isFinite": true\n    }\n}\'\n')),(0,o.kt)("p",null,"Just to make sure everything worked, Alice uses another ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," command to check if the transfer was successful."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'http://localhost/alice/management/v2/transferprocesses/request' \\\n--header 'X-Api-Key: password' \\\n--data ''\n")),(0,o.kt)("p",null,'The response shows her that she has a "FINALIZED" transfer with the type "CONSUMER" of the asset with the ID "3". This means that Alice has now successfully transferred Bob\'s data to her desired location via the EDC!'),(0,o.kt)("h2",{id:"notice"},"Notice"),(0,o.kt)("p",null,"This work is licensed under the ",(0,o.kt)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by/4.0/legalcode"},"CC-BY-4.0"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"SPDX-License-Identifier: CC-BY-4.0"),(0,o.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023 sovity GmbH"),(0,o.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023 SAP SE"),(0,o.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023 msg systems AG"),(0,o.kt)("li",{parentName:"ul"},"Source URL: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io"},"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io"))))}u.isMDXComponent=!0}}]);